{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sagarkhanapurkar/Code/Torleado copy/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/sagarkhanapurkar/Code/Torleado copy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/sagarkhanapurkar/Code/Torleado copy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useWorkoutsContext}from\"../hooks/useWorkoutsContext\";import{useAuthContext}from'../hooks/useAuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WorkoutForm=function WorkoutForm(){var _useWorkoutsContext=useWorkoutsContext(),dispatch=_useWorkoutsContext.dispatch;var _useAuthContext=useAuthContext(),user=_useAuthContext.user;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),load=_useState4[0],setLoad=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),reps=_useState6[0],setReps=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),emptyFields=_useState10[0],setEmptyFields=_useState10[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var workout,response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(user){_context.next=4;break;}setError('You must be logged in');return _context.abrupt(\"return\");case 4:workout={title:title,load:load,reps:reps};_context.next=7;return fetch('/api/workouts',{method:'POST',body:JSON.stringify(workout),headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(user.token)}});case 7:response=_context.sent;_context.next=10;return response.json();case 10:json=_context.sent;if(!response.ok){setError(json.error);setEmptyFields(json.emptyFields);}if(response.ok){setTitle('');setLoad('');setReps('');setError(null);setEmptyFields([]);dispatch({type:'CREATE_WORKOUT',payload:json});}case 13:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"create\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a New Workout\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Excersize Title:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setTitle(e.target.value);},value:title,className:emptyFields.includes('title')?'error':''}),/*#__PURE__*/_jsx(\"label\",{children:\"Load (in kg):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:function onChange(e){return setLoad(e.target.value);},value:load,className:emptyFields.includes('load')?'error':''}),/*#__PURE__*/_jsx(\"label\",{children:\"Reps:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:function onChange(e){return setReps(e.target.value);},value:reps,className:emptyFields.includes('reps')?'error':''}),/*#__PURE__*/_jsx(\"button\",{children:\"Add Workout\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});};export default WorkoutForm;","map":{"version":3,"names":["useState","useWorkoutsContext","useAuthContext","WorkoutForm","dispatch","user","title","setTitle","load","setLoad","reps","setReps","error","setError","emptyFields","setEmptyFields","handleSubmit","e","preventDefault","workout","fetch","method","body","JSON","stringify","headers","token","response","json","ok","type","payload","target","value","includes"],"sources":["/Users/sagarkhanapurkar/Code/Torleado copy/frontend/src/components/WorkoutForm.js"],"sourcesContent":["import { useState } from \"react\"\nimport { useWorkoutsContext } from \"../hooks/useWorkoutsContext\"\nimport { useAuthContext } from '../hooks/useAuthContext'\n\nconst WorkoutForm = () => {\n  const { dispatch } = useWorkoutsContext()\n  const { user } = useAuthContext()\n\n  const [title, setTitle] = useState('')\n  const [load, setLoad] = useState('')\n  const [reps, setReps] = useState('')\n  const [error, setError] = useState(null)\n  const [emptyFields, setEmptyFields] = useState([])\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (!user) {\n      setError('You must be logged in')\n      return\n    }\n\n    const workout = {title, load, reps}\n\n    const response = await fetch('/api/workouts', {\n      method: 'POST',\n      body: JSON.stringify(workout),\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${user.token}`\n      }\n    })\n    const json = await response.json()\n\n    if (!response.ok) {\n      setError(json.error)\n      setEmptyFields(json.emptyFields)\n    }\n    if (response.ok) {\n      setTitle('')\n      setLoad('')\n      setReps('')\n      setError(null)\n      setEmptyFields([])\n      dispatch({type: 'CREATE_WORKOUT', payload: json})\n    }\n  }\n\n  return (\n    <form className=\"create\" onSubmit={handleSubmit}>\n      <h3>Add a New Workout</h3>\n\n      <label>Excersize Title:</label>\n      <input \n        type=\"text\"\n        onChange={(e) => setTitle(e.target.value)}\n        value={title}\n        className={emptyFields.includes('title') ? 'error' : ''}\n      />\n\n      <label>Load (in kg):</label>\n      <input \n        type=\"number\"\n        onChange={(e) => setLoad(e.target.value)}\n        value={load}\n        className={emptyFields.includes('load') ? 'error' : ''}\n      />\n\n      <label>Reps:</label>\n      <input \n        type=\"number\"\n        onChange={(e) => setReps(e.target.value)}\n        value={reps}\n        className={emptyFields.includes('reps') ? 'error' : ''}\n      />\n\n      <button>Add Workout</button>\n      {error && <div className=\"error\">{error}</div>}\n    </form>\n  )\n}\n\nexport default WorkoutForm"],"mappings":"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"},"metadata":{},"sourceType":"module"}